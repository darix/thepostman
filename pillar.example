include:
  # this code relies on the sysconfig part of https://github.com/darix/suse-base-profile
  - includes.thepostman

# you just want to get a minimal config back to what would be in the package
postfix:
  enabled: True
  config:
    main.cf:
      myhostname: localhost
    master.cf:
      # update just the maxproc field compared to the distro default config:
      smtp-inet:
        maxproc: 100
      # define a default submission service
      # Adding this to the includes list would give you the same:
      # - includes.thepostman.services.submission-remote
      submission-inet:
        name: submission
        type: inet
        private: 'n'
        unpriv: '-'
        chroot: 'n'
        wakeup: '-'
        maxproc: '-'
        command: 'smtpd'
        args: '-o syslog_name=postfix/submission -o smtpd_forbid_unauth_pipelining=no -o smtpd_tls_security_level=encrypt -o content_filter=smtp:[127.0.0.1]:10024 -o smtpd_sasl_auth_enable=yes -o smtpd_tls_auth_only=yes -o local_header_rewrite_clients=static:all -o smtpd_hide_client_session=yes -o smtpd_reject_unlisted_recipient=no -o smtpd_client_restrictions=$mua_client_restrictions -o smtpd_helo_restrictions=$mua_helo_restrictions -o smtpd_sender_restrictions=$mua_sender_restrictions -o smtpd_recipient_restrictions= -o smtpd_relay_restrictions=permit_sasl_authenticated,reject -o milter_macro_daemon_name=ORIGINATING'
  maps:
    relay:
      - "localhost ok"
    helo_access: |-
      127.0.0.1 REJECT nuuuuhuuuu
    # any file name here will be saved as /etc/postfix/{filename}
    custom_map_for_x:
      - "ohnoes"
    sasl_passwd: |-
      example.com hello:supersecure